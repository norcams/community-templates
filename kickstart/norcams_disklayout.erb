<%#
kind: ptable
name: norcams ptable default
oses:
- CentOS 5
- CentOS 6
- CentOS 7
- Fedora 16
- Fedora 17
- Fedora 18
- Fedora 19
- Fedora 20
- RedHat 5
- RedHat 6
- RedHat 7
%>
<%
  installdevice = @host.params['installdevice'] ? @host.params['installdevice']               : 'default'
  ondisk        = @host.params['installdevice'] ? "--ondisk=#{@host.params['installdevice']}" : ''
  clear_osdisk  = @host.params['keepdevices']   ? "--drives=#{@host.params['installdevice']}" : ''
%>

zerombr
clearpart --all --initlabel <%= clear_osdisk %>
part /boot --fstype=xfs --size=512 --asprimary
part pv.<%= installdevice %> <%= ondisk %> --size=10240 --asprimary
part pv.ext --grow
volgroup vg_root pv.<%= installdevice %>
  logvol swap --name=lv_swap --vgname=vg_root --size=256
  logvol /    --name=lv_root --vgname=vg_root --fstype=xfs --size=1 --grow
volgroup vg_ext pv.ext

